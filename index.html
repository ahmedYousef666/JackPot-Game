<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#0f172a">
  <title>Ù…Ø§ÙƒÙŠÙ†Ø© Ø§Ù„Ø­Ø¸ Ø§Ù„Ù…Ø®ØµØµØ©</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Cairo', sans-serif;
      background-color: #0f172a;
      color: #f8fafc;
    }

    /* Ø´ÙƒÙ„ Ø®Ø§Ù†Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© (Reel) */
    .slot {
      background: linear-gradient(180deg, #020617, #020617);
      padding: 14px;
      border-radius: 10px;
      border: 3px solid #1e293b;
      box-shadow:
        inset 0 4px 6px rgba(255,255,255,0.05),
        inset 0 -4px 6px rgba(0,0,0,0.8),
        0 6px 15px rgba(0,0,0,0.6);
      min-width: 90px;
      min-height: 65px;

      display: flex;
      align-items: center;
      justify-content: center;

      font-size: 1.1rem;
      transition: transform 0.15s ease;
    }

    .slot.final {
      transform: scale(1.05);
      border-color: #38bdf8;
    }
  </style>
</head>

<body class="min-h-screen flex items-center justify-center p-4">

  <div class="w-full max-w-md bg-slate-800 rounded-xl p-6 shadow-xl">
    <h1 class="text-2xl font-bold text-center mb-4">ğŸ° Ù…Ø§ÙƒÙŠÙ†Ø© Ø§Ù„Ø­Ø¸</h1>

    <!-- Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… -->
    <div id="lists" class="space-y-3"></div>

    <div class="flex gap-2 mt-3">
      <button onclick="addList()" class="flex-1 bg-emerald-600 py-2 rounded font-bold">
        â• Ø¥Ø¶Ø§ÙØ© Ù‚Ø§Ø¦Ù…Ø©
      </button>
      <button onclick="removeList()" class="flex-1 bg-rose-600 py-2 rounded font-bold">
        â– Ø­Ø°Ù Ù‚Ø§Ø¦Ù…Ø©
      </button>
    </div>

    <!-- Ø²Ø± Ø§Ù„ØªØ´ØºÙŠÙ„ -->
    <button onclick="spin()" class="w-full mt-4 bg-blue-600 hover:bg-blue-700 py-2 rounded font-bold">
      ğŸ² Ù„ÙÙ‘ Ø§Ù„Ù…Ø§ÙƒÙŠÙ†Ø©
    </button>

    <button onclick="resetAll()" class="w-full mt-2 bg-slate-600 hover:bg-slate-700 py-2 rounded font-bold">
      â™»ï¸ Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…
    </button>

    <!-- Ø¥Ø·Ø§Ø± Ø§Ù„Ù…Ø§ÙƒÙŠÙ†Ø© -->
    <div class="mt-6 p-3 rounded-xl bg-slate-900 border-4 border-slate-700">
      <div
        id="result"
        class="grid gap-2 text-center font-bold"
        style="grid-auto-flow: column; grid-auto-columns: 1fr;"
      ></div>
    </div>
  </div>

<script>
/* =======================
   Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…
======================= */
let listsCount = 0;
const listsContainer = document.getElementById('lists');

function createList(value = '') {
  listsCount++;
  const textarea = document.createElement('textarea');
  textarea.className = 'w-full p-2 rounded text-black';
  textarea.placeholder = `Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø±Ù‚Ù… ${listsCount} (ÙƒÙ„ Ø¹Ù†ØµØ± ÙÙŠ Ø³Ø·Ø±)`;
  textarea.value = value;
  textarea.addEventListener('input', saveLists);
  listsContainer.appendChild(textarea);
}

function addList() {
  createList();
  saveLists();
}

function removeList() {
  if (listsContainer.children.length <= 1) return;
  listsContainer.removeChild(listsContainer.lastChild);
  listsCount--;
  saveLists();
}

function saveLists() {
  const values = [...listsContainer.children].map(t => t.value);
  localStorage.setItem('lists', JSON.stringify(values));
}

function loadLists() {
  const saved = JSON.parse(localStorage.getItem('lists') || '[]');
  if (saved.length === 0) {
    createList();
  } else {
    saved.forEach(v => createList(v));
  }
}

/* =======================
   Ø§Ù„Ù„Ù (Slot Effect)
======================= */
function spin() {
  const textareas = [...listsContainer.children];
  const resultBox = document.getElementById('result');
  resultBox.innerHTML = '';

  textareas.forEach((ta, index) => {
    const slot = document.createElement('div');
    slot.className = 'slot';
    slot.textContent = 'â€”';
    resultBox.appendChild(slot);

    const items = ta.value.split('\n').map(x => x.trim()).filter(Boolean);
    if (items.length === 0) return;

    const interval = setInterval(() => {
      slot.textContent = items[Math.floor(Math.random() * items.length)];
    }, 100);

    setTimeout(() => {
      clearInterval(interval);
      slot.textContent = items[Math.floor(Math.random() * items.length)];
      slot.classList.add('final');
    }, 1200 + index * 300);
  });
}

/* =======================
   Reset
======================= */
function resetAll() {
  if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…ØŸ')) return;
  localStorage.removeItem('lists');
  listsContainer.innerHTML = '';
  listsCount = 0;
  createList();
  document.getElementById('result').innerHTML = '';
}

/* =======================
   ØªØ­Ù…ÙŠÙ„ Ø¹Ù†Ø¯ Ø§Ù„ÙØªØ­
======================= */
loadLists();

/* =======================
   Service Worker
======================= */
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('./sw.js');
}
</script>

</body>
</html>
